<!DOCTYPE html>
<html lang=en>
    <head>
        <meta charset=UTF-8>
        <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0"/>
        <title>微信网站微信中继...</title>
        <link id=favicon rel=icon href type=image/gif sizes=16x16>
        <style>#wechat_iframe{position:absolute;left:-2px;top:-2px;right:-2px;bottom:-2px}#loading{position:absolute;top:20px;left:20px;right:20px;background:#fff;opacity:.9;transition:all 2s}#loading p.default{margin-bottom:0}#loading .loading-longer{color:#ff6708}#loading .loading-connected{color:#0061b9}#wechat_img,#wechat_summary{height:1px;width:1px;overflow:hidden;opacity:.1;position:fixed;bottom:0;left:0}.hide{display:none}.website-host{font-weight:bold;font-style:italic}.link{color:#0061b9}.website-title-extra{font-size:14px}</style>
    </head>
    <body>
        <div id=wechat_img><img id=featured width=800 height=600 src=""/></div>
        <div id=wechat_summary>守望的微信网站跳转中……</div>
        <iframe id=wechat_iframe height=100% width=100% src>
        </iframe>
        <h1 id=loading>
            <p class=default>正在载入网站 <span class="website-host link"></span> ... </p>
            <p class="loading-connected hide">网站已经连接成功，正在加载完整数据....</p>
            <p class="loading-longer hide">不好意思，好像加载时间略长一些，请再耐心等等。</p>
            <p class="loading-failure hide">
                如果不想等，请点击微信右上角，选择"在浏览器(Safari/QQ)打开"；或者直接在你的手机浏览器里输入 <span class=website-host></span>：
            </p>
            <p class="unload hide">正在打开新网页……<span class="website-title link"></span><br/><br/>(<span class=website-title-extra></span>)</p>
        </h1>
        <script>(function(){var f=document;var E=window;var q;var k=location;var D;var A=false;var e=0;var J=f.querySelector("#loading");var s=f.querySelector("#loading .default");var t=f.querySelector("#loading .loading-connected");var g=f.querySelector("#loading .loading-longer");var m=f.querySelector("#loading .loading-failure");var a=f.querySelector("#loading .unload");var z=f.querySelector(".website-title");var l=f.querySelector(".website-title-extra");var i=f.querySelector("#wechat_iframe");var n=f.getElementById("favicon");var r=f.getElementById("featured");var c=setInterval(u,500);var B="/--WC--";var F=new RegExp(B,"g");var j="loadingIFrame";var d=new Event(j);var x="https://";var w=k.pathname.replace(/\//,"").split("/")[0];n.href="/"+w+"/favicon.ico";r.src="/"+w+"/banner.png";o();h();E.addEventListener("message",function(T){var R=T.data;switch(R.msgTitle){case"connected":e=e||new Date().valueOf();if(A){return}A=true;clearTimeout(D);L(s,g,m,a);C(t);setTimeout(function(){L(t);N(J)},500);break;case"updateParent":clearInterval(c);var V=R.title;var Q=R.description;var O=R.faviconUrl;var U=q=R.url;if(!U){return}if(R.isReplaceHref){k.href=U.replace(/^\/\//g,"http://")}else{f.title=V;var P=U.replace(x,"").replace("#",B);v(P);if(R.imgSrc){r.src=R.imgSrc}if(Q){f.getElementById("wechat_summary").innerText=Q}if(O){n.setAttribute("href",O)}}break;case"beforeunload":C(a);z.innerText=R.targetTitle;var S=R.targetTitleExtra;l.innerText=I(S);H(J);M(S);setTimeout(function(){k.reload()},200);break;case"unload":A=false;break}});f.addEventListener(j,function(O){G()},false);f.addEventListener("DOMContentLoaded",function(){f.dispatchEvent(d);p()});E.addEventListener("popstate",function(O){var P=i.contentWindow;if(!P){return}P.postMessage({type:"updateIFrameUrlByState",url:b()},"*")},false);function o(){var O=decodeURI(k.hash.replace(/^#/,"").replace(x,""));if(O.length>3){v(O)}}function K(O){return x+O.replace(F,"#")}function v(P){var Q=i.contentWindow;if(!Q){return}var O="/"+w+"/"+P;history.pushState({},"",O);setTimeout(function(){var S=localStorage.getItem("lastIFrameUrl");var R=localStorage.getItem("lastIFrameUrlDateTime");var T=new Date().valueOf();localStorage.setItem("lastIFrameUrlDateTime",T);localStorage.setItem("lastIFrameUrl",O);if(S!==O&&O&&O.length>10){if(e&&T>e+7000&&R&&(+R)+3000<T){k.reload()}}},10)}function G(){var O=b();if(i.src!=O){i.src=O}[].forEach.call(f.querySelectorAll(".website-host"),function(P){P.innerText=I(O)})}function b(){var P,S;S=k.pathname.replace(/^\//,"");P=S.replace(w,"");var R=w.split(".").length>2?x:x+"www.";var Q=R+w;if(P&&P.length>5){var O=K(P);if(i.src!=O&&q!==O){Q=O}}return Q}function p(){D=setTimeout(function(){s.style.display="none";g.style.display="block";D=setTimeout(function(){g.style.display="none";m.style.display="block";D=setTimeout(function(){m.style.display="none"},5000)},8000)},7000)}function u(){var O=i.contentWindow;if(!O){return}O.postMessage({type:"wechat_unblocker"},"*")}function L(){[].forEach.call(arguments,function(O){O.style.display="none"})}function C(O){[].forEach.call(arguments,function(P){P.style.display="block"})}function N(O){O.style.transform="translate(0px, -100px)";O.style.opacity=0.5;setTimeout(function(){L(O)},1000)}function H(O){C(O);O.style.transform="translate(0px, 0px)";O.style.opacity=1}function M(O){if(O&&O.length>10){var P=O.replace(x,"").replace("#",B);v(P)}}function I(O){O=O||"";var P=O.split("/").reverse().reduce(function(Q,R){R=decodeURIComponent(R);if(R&&R.length>5&&R.length>Q.length){return R}else{return Q}},"");return P&&/[\u4E00-\u9FA5]+/.test(P)?P:O}function h(){if(!y()){location.replace(b())}}function y(){var O=navigator.userAgent.toLowerCase();f.querySelector("#user-agent").innerText=O;return !!O.match(/MicroMessenger/i)}})();</script>
    </body>
</html>