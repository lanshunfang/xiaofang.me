<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0"/>
    <title>微信网站微信中继...</title>
    <link id=favicon rel=icon href type=image/gif sizes=16x16>
    <style>#wechat_iframe{position:absolute;left:-2px;top:-2px;right:-2px;bottom:-2px}#loading{position:absolute;top:20px;left:20px;right:20px;background:#fff;opacity:.9;transition:all 2s}#loading p.default{margin-bottom:0}#loading .loading-longer{color:#ff6708}#loading .loading-connected{color:#0061b9}#wechat_img,#wechat_summary{height:1px;width:1px;overflow:hidden;opacity:.1;position:fixed;bottom:0;left:0}.hide{display:none}.website-host{font-weight:bold;font-style:italic}.link{color:#0061b9}.website-title-extra{font-size:14px}</style>
</head>
<body>
<div id=wechat_img><img id=featured width=800 height=600 src=""/></div>
<div id=wechat_summary>守望的微信网站跳转中……</div>
<iframe id=wechat_iframe height=100% width=100% src>
</iframe>
<h1 id=loading>
    <p class=default>正在载入网站 <span class="website-host link"></span> ... </p>
    <p class="loading-connected hide">网站已经连接成功，正在加载完整数据....</p>
    <p class="loading-longer hide">不好意思，好像加载时间略长一些，请再耐心等等。</p>
    <p class="loading-failure hide">
        如果不想等，请点击微信右上角，选择"在浏览器(Safari/QQ)打开"；或者直接在你的手机浏览器里输入 <span class=website-host></span>：
    </p>
    <p class="unload hide">正在打开新网页……<span class="website-title link"></span><br/><br/>(<span class=website-title-extra></span>)</p>
</h1>
<script>(function(){var e=document;var C=window;var o;var i=location;var B;var x=false;var H=e.querySelector("#loading");var q=e.querySelector("#loading .default");var r=e.querySelector("#loading .loading-connected");var f=e.querySelector("#loading .loading-longer");var k=e.querySelector("#loading .loading-failure");var a=e.querySelector("#loading .unload");var w=e.querySelector(".website-title");var j=e.querySelector(".website-title-extra");var g=e.querySelector("#wechat_iframe");var l=e.getElementById("favicon");var p=e.getElementById("featured");var c=setInterval(s,500);var y="/--WC--";var D=new RegExp(y,"g");var h="loadingIFrame";var d=new Event(h);var v="https://";var u=i.pathname.replace(/\//,"").split("/")[0];var A="";l.href="/"+u+"/favicon.ico";p.src="/"+u+"/banner.png";m();C.addEventListener("message",function(R){var P=R.data;switch(P.msgTitle){case"connected":if(x){return}x=true;clearTimeout(B);J(q,f,k,a);z(r);setTimeout(function(){J(r);L(H)},500);break;case"updateParent":clearInterval(c);var T=P.title;var O=P.description;var M=P.faviconUrl;var S=o=P.url;if(!S){return}if(P.isReplaceHref){i.href=S.replace(/^\/\//g,"http://")}else{e.title=T;var N=S.replace(v,"").replace("#",y);t(N);if(P.imgSrc){p.src=P.imgSrc}if(O){e.getElementById("wechat_summary").innerText=O}if(M){l.setAttribute("href",M)}}break;case"beforeunload":z(a);w.innerText=P.targetTitle;var Q=P.targetTitleExtra;j.innerText=G(Q);F(H);K(Q);break;case"unload":x=false;break}});e.addEventListener(h,function(M){E()},false);e.addEventListener("DOMContentLoaded",function(){e.dispatchEvent(d);n()});C.addEventListener("popstate",function(M){var N=g.contentWindow;if(!N){return}N.postMessage({type:"updateIFrameUrlByState",url:b()},"*")},false);function m(){var M=decodeURI(i.hash.replace(/^#/,"").replace(v,""));if(M.length>3){t(M)}}function I(M){return v+M.replace(D,"#")}function t(N){var O=g.contentWindow;if(!O){return}var M="/"+u+"/"+N;history.pushState({},"",M);setTimeout(function(){if(A!==M){A=M;i.reload()}},10)}function E(){var M=b();if(g.src!=M){g.src=M}[].forEach.call(e.querySelectorAll(".website-host"),function(N){N.innerText=G(M)})}function b(){var N,Q;Q=i.pathname.replace(/^\//,"");N=Q.replace(u,"");var P=u.split(".").length>2?v:v+"www.";var O=P+u;if(N&&N.length>5){var M=I(N);if(g.src!=M&&o!==M){O=M}}return O}function n(){B=setTimeout(function(){q.style.display="none";f.style.display="block";B=setTimeout(function(){f.style.display="none";k.style.display="block";B=setTimeout(function(){k.style.display="none"},5000)},8000)},7000)}function s(){var M=g.contentWindow;if(!M){return}M.postMessage({type:"wechat_unblocker"},"*")}function J(){[].forEach.call(arguments,function(M){M.style.display="none"})}function z(M){[].forEach.call(arguments,function(N){N.style.display="block"})}function L(M){M.style.transform="translate(0px, -100px)";M.style.opacity=0.5;setTimeout(function(){J(M)},1000)}function F(M){z(M);M.style.transform="translate(0px, 0px)";M.style.opacity=1}function K(M){if(M&&M.length>10){var N=M.replace(v,"").replace("#",y);t(N)}}function G(M){M=M||"";var N=M.split("/").reverse().reduce(function(O,P){P=decodeURIComponent(P);if(P&&P.length>5&&P.length>O.length){return P}else{return O}},"");return N&&/[\u4E00-\u9FA5]+/.test(N)?N:M}})();</script>
</body>
</html>