<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=UTF-8>
    <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0"/>
    <title>微信网站微信中继...</title>
    <style>#wechat_iframe{position:absolute;left:-2px;top:-2px;right:-2px;bottom:-2px}#loading{position:absolute;top:20px;left:20px;right:20px;background:#fff;opacity:.9;transition:all 2s}#loading p.default{margin-bottom:0}#loading .loading-longer{color:#ff6708}#loading .loading-connected{color:#0061b9}#wechat_img,#wechat_summary{height:1px;width:1px;overflow:hidden;opacity:.1;position:fixed;bottom:0;left:0}.hide{display:none}.website-host{font-weight:bold;font-style:italic}.website-title{color:#0061b9}.website-title-extra{font-size:14px}</style>
</head>
<body>
<div id=wechat_img><img id=featured width=800 height=600 src="//www.xiaofang.me/wp-content/uploads/2014/11/unnamed.png"/></div>
<div id=wechat_summary>守望的微信网站跳转中……</div>
<iframe id=wechat_iframe height=100% width=100% src>
</iframe>
<h1 id=loading>
    <p class=default>正在载入网站 <span class=website-host></span> ... </p>
    <p class="loading-connected hide">网站已经连接成功，正在加载完整数据....</p>
    <p class="loading-longer hide">不好意思，好像加载时间略长一些，请再耐心等等。</p>
    <p class="loading-failure hide">
        如果不想等，请点击微信右上角，选择"在浏览器(Safari/QQ)打开"；或者直接在你的手机浏览器里输入 <span class=website-host></span>：
    </p>
    <p class="unload hide">正在打开新网页……<span class=website-title></span>(<span class=website-title-extra></span>)</p>
</h1>
<script>(function(){var y=document;var f=window;var v;var k=location;var l;var s=false;var e=y.querySelector("#loading");var b=y.querySelector("#loading .default");var w=y.querySelector("#loading .loading-connected");var n=y.querySelector("#loading .loading-longer");var r=y.querySelector("#loading .loading-failure");var p=y.querySelector("#loading .unload");var t=y.querySelector(".website-title");var u=y.querySelector(".website-title-extra");var j=y.querySelector("#wechat_iframe");var q=setInterval(o,500);var i="--WC--";f.addEventListener("message",function(C){var B=C.data;switch(B.msgTitle){case"connected":if(s){return}s=true;clearTimeout(l);d(b,n,r,p);c(w);setTimeout(function(){d(w);a(e)},500);break;case"updateParent":clearInterval(q);var D=B.title;var A=B.description;var z=v=B.url;if(!z){return}if(B.isReplaceHref){k.href=z.replace(/^\/\//g,"http://")}else{y.title=D;k.hash=encodeURI(z.replace("#",i));if(B.imgSrc){y.getElementById("featured").src=B.imgSrc}if(A){y.getElementById("wechat_summary").innerText=A}}break;case"beforeunload":c(p);t.innerText=B.targetTitle;u.innerText=g(B.targetTitleExtra);m(e);break;case"unload":s=false;break}});y.addEventListener("DOMContentLoaded",function(){h();x()});function h(){var D=k.pathname.replace(/\//g,"");var C=k.hash;var B=D.split(".").length>2?"https://":"https://www.";var A=B+D;if(C.length>2){var z=decodeURI(C.slice(1)).replace(i,"#");if(j.src!=z&&v!==z){A=z}}j.src=A;[].forEach.call(y.querySelectorAll(".website-host"),function(E){E.innerText=g(A)})}function x(){l=setTimeout(function(){b.style.display="none";n.style.display="block";l=setTimeout(function(){n.style.display="none";r.style.display="block";l=setTimeout(function(){r.style.display="none"},5000)},8000)},7000)}function o(){var z=j.contentWindow;if(!z){return}z.postMessage({type:"wechat_unblocker"},"*")}function d(){[].forEach.call(arguments,function(z){z.style.display="none"})}function c(z){[].forEach.call(arguments,function(A){A.style.display="block"})}function a(z){z.style.transform="translate(0px, -100px)";z.style.opacity=0.5;setTimeout(function(){d(z)},1000)}function m(z){c(z);z.style.transform="translate(0px, 0px)";z.style.opacity=1}function g(z){z=z||"";var A=z.split("/").reverse().reduce(function(B,C){C=decodeURIComponent(C);if(C&&C.length>5&&C.length>B.length){return C}else{return B}},"");return A&&/[\u4E00-\u9FA5]+/.test(A)?A:z}})();</script>
</body>
</html>