<script>/*<![CDATA[*/(function(){var a=setInterval(i,500);var d=false;var j=document;var g=window;var f=location;var l=f.host;var b;var h;g.addEventListener("message",function(m){clearInterval(a);if(!d){setTimeout(i,100)}d=true},false);j.addEventListener("DOMContentLoaded",function(o){var q=jQuery;var n=g.parent;if(!n){return}g.addEventListener("message",function(r){if(r.type==="wechat_unblocker"){p()}},false);p();g.addEventListener("hashchange",function(r){p()});q("body").on("click","a",function(t){var s=q(this);var r=s.attr("href");if(/\/\//.test(r)&&!r.match(l)){m(true,r)}else{p()}}).on("mouseenter","a",function(s){var r=q(this);b=r.text();h=r.attr("href")});function p(){setTimeout(function(){m()},1000)}function m(r,s){var u=g.parent;if(!u){return}var t=q(".wp-post-image:first");if(!t.length){t=q(".size-large:first")}if(!t.length){t=q(".size-full:first")}if(!t.length){var v=0;q("img").each(function(){var x=parseInt(q(this).attr("width"))||1;var z=parseInt(q(this).attr("height"))||1;var y=x*z;if(y>v){v=y;t=q(this)}})}u.postMessage({msgTitle:"updateParent",title:j.title,description:q(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:s||f.href,path:f.path,search:f.search,hash:f.hash,isReplaceHref:r,imgSrc:t.attr("src"),faviconUrl:e()},"*")}});g.addEventListener("beforeunload",function(){c()},false);g.addEventListener("unload",function(){k()},false);function c(){var m=g.parent;m.postMessage({msgTitle:"beforeunload",targetTitle:b,targetTitleExtra:h,},"*")}function k(){var m=g.parent;m.postMessage({msgTitle:"unload",},"*")}function i(){var m=g.parent;if(!m){clearInterval(a);return}m.postMessage({msgTitle:"connected"},"*")}function e(){var o=undefined;var m=j.getElementsByTagName("link");for(var n=0;n<m.length;n++){if((m[n].getAttribute("rel")=="icon")||(m[n].getAttribute("rel")=="shortcut icon")){o=m[n].getAttribute("href")}}return o}})();/*]]>*/</script>