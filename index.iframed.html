<script>/*<![CDATA[*/(function(){var a=setInterval(j,500);var d=false;var k=document;var g=window;var f=location;var m=f.host;var b;var i;g.addEventListener("message",function(n){clearInterval(a);if(!d){setTimeout(j,100)}d=true},false);k.addEventListener("DOMContentLoaded",function(p){if(typeof jQuery!=="undefined"){var r=jQuery}else{var r=window.$}var o=g.parent;if(!o||o===g){return}g.addEventListener("message",function(u){var s=u.data;var t=s.type;if(t==="wechat_unblocker"){q()}else{if(t==="updateIFrameUrlByState"){h(s.url)}}},false);q();g.addEventListener("hashchange",function(s){q()});r("body").on("click","a",function(u){var t=r(this);var s=t.attr("href");if(/\/\//.test(s)&&!s.match(m)){n(true,s)}else{q()}}).on("mouseenter","a",function(t){var s=r(this);b=s.text();i=s.attr("href")});function q(){setTimeout(function(){n()},1000)}function n(s,t){var v=g.parent;if(!v||v===g){return}var u=r(".wp-post-image:first");if(!u.length){u=r(".size-large:first")}if(!u.length){u=r(".size-full:first")}if(!u.length){var w=0;r("img").each(function(){var x=parseInt(r(this).attr("width"))||1;var z=parseInt(r(this).attr("height"))||1;var y=x*z;if(y>w){w=y;u=r(this)}})}v.postMessage({msgTitle:"updateParent",title:k.title,description:r(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:t||f.href,path:f.path,search:f.search,hash:f.hash,isReplaceHref:s,imgSrc:u.attr("src"),faviconUrl:e()},"*")}});g.addEventListener("beforeunload",function(){c()},false);g.addEventListener("unload",function(){l()},false);function h(n){if(n!==location.href){location.replace(n)}}function c(){var n=g.parent;if(!n||n===g){return}n.postMessage({msgTitle:"beforeunload",targetTitle:b,targetTitleExtra:i,},"*")}function l(){var n=g.parent;if(!n||n===g){return}n.postMessage({msgTitle:"unload",},"*")}function j(){var n=g.parent;if(!n||n===g){clearInterval(a);return}n.postMessage({msgTitle:"connected"},"*")}function e(){var p=undefined;var n=k.getElementsByTagName("link");for(var o=0;o<n.length;o++){if((n[o].getAttribute("rel")=="icon")||(n[o].getAttribute("rel")=="shortcut icon")){p=n[o].getAttribute("href")}}return p}})();/*]]>*/</script>