<script>/*<![CDATA[*/(function(){var a=setInterval(h,500);var d=false;var j=document;var f=window;var e=location;var l=e.host;var b;var g;var i="--WC--";f.addEventListener("message",function(m){clearInterval(a);if(!d){setTimeout(h,100)}d=true},false);j.addEventListener("DOMContentLoaded",function(p){var r=jQuery;var o=f.parent;if(!o){return}f.addEventListener("message",function(s){if(s.type==="wechat_unblocker"){q()}},false);q();f.addEventListener("hashchange",function(s){q()});var m=e.href.replace(i,"#");if(m!==e.href+""){e.replace(m)}r("body").on("click","a",function(u){var t=r(this);var s=t.attr("href");if(/\/\//.test(s)&&!s.match(l)){n(true,s)}else{q()}}).on("mouseenter","a",function(t){var s=r(this);b=s.text();g=" ( "+s.attr("href").split("/").reverse().reduce(function(u,v){if(u&&u.length>3){return u}if(v.length>5){return decodeURIComponent(v)}},"")+" )"});function q(){setTimeout(function(){n()},1000)}function n(s,t){var v=f.parent;if(!v){return}var u=r(".wp-post-image:first");if(!u.length){u=r(".size-large:first")}if(!u.length){u=r(".size-full:first")}if(!u.length){var w=0;r("img").each(function(){var x=parseInt(r(this).attr("width"))||1;var z=parseInt(r(this).attr("height"))||1;var y=x*z;if(y>w){w=y;u=r(this)}})}v.postMessage({msgTitle:"updateParent",title:j.title,description:r(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:t||e.href,path:e.path,search:e.search,hash:e.hash,isReplaceHref:s,imgSrc:u.attr("src")},"*")}});f.addEventListener("beforeunload",function(){c()},false);f.addEventListener("unload",function(){k()},false);function c(){var m=f.parent;m.postMessage({msgTitle:"beforeunload",targetTitle:b,targetTitleExtra:g,},"*")}function k(){var m=f.parent;m.postMessage({msgTitle:"unload",},"*")}function h(){var m=f.parent;if(!m){clearInterval(a);return}m.postMessage({msgTitle:"connected"},"*")}})();/*]]>*/</script>