<script>/*<![CDATA[*/(function(){var a=setInterval(f,500);var c=false;var g=document;var e=window;var d=location;var i=d.host;var b;e.addEventListener("message",function(j){clearInterval(a);if(!c){setTimeout(f,100)}c=true},false);g.addEventListener("DOMContentLoaded",function(l){var k=e.parent;if(!k){return}e.addEventListener("message",function(n){if(n.type==="wechat_unblocker"){m()}},false);m();e.addEventListener("hashchange",function(n){m()});$("body").on("click","a",function(p){var o=$(this);var n=o.attr("href");if(/\/\//.test(n)&&!n.match(i)){j(true,n)}else{m()}b=o.text()+" ( "+o.attr("href").split(".").reverse().reduce(function(q,r){if(q&&q.length>3){return q}if(r.length>5){return decodeURIComponent(r)}},"")+" )"});function m(){setTimeout(function(){j()},1000)}function j(n,o){var q=e.parent;if(!q){return}var p=$(".wp-post-image:first");if(!p.length){p=$(".size-large:first")}if(!p.length){p=$(".size-full:first")}if(!p.length){var r=0;$("img").each(function(){var s=parseInt($(this).attr("width"))||1;var u=parseInt($(this).attr("height"))||1;var t=s*u;if(t>r){r=t;p=$(this)}})}q.postMessage({msgTitle:"updateParent",title:g.title,description:$(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:o||d.href,path:d.path,search:d.search,hash:d.hash,isReplaceHref:n,imgSrc:p.attr("src")},"*")}});e.addEventListener("unload",function(){h()});function h(){var j=e.parent;j.postMessage({msgTitle:"unload",targetTitle:b},"*")}function f(){var j=e.parent;if(!j){clearInterval(a);return}j.postMessage({msgTitle:"connected"},"*")}})();/*]]>*/</script>