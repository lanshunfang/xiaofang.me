<script>/*<![CDATA[*/(function(){var a=setInterval(g,500);var c=false;var h=document;var f=window;var e=location;var j=e.host;var b;f.addEventListener("message",function(k){clearInterval(a);if(!c){setTimeout(g,100)}c=true},false);h.addEventListener("DOMContentLoaded",function(m){var l=f.parent;if(!l){return}f.addEventListener("message",function(o){if(o.type==="wechat_unblocker"){n()}},false);n();f.addEventListener("hashchange",function(o){n()});$("body").on("click","a",function(q){var p=$(this);var o=p.attr("href");if(/\/\//.test(o)&&!o.match(j)){k(true,o)}else{n()}b=p.text()+" ( "+p.attr("href").split(".").reverse().reduce(function(r,s){if(r&&r.length>3){return r}if(s.length>5){return decodeURIComponent(s)}},"")+" )"});function n(){setTimeout(function(){k()},1000)}function k(o,p){var r=f.parent;if(!r){return}var q=$(".wp-post-image:first");if(!q.length){q=$(".size-large:first")}if(!q.length){q=$(".size-full:first")}if(!q.length){var s=0;$("img").each(function(){var t=parseInt($(this).attr("width"))||1;var v=parseInt($(this).attr("height"))||1;var u=t*v;if(u>s){s=u;q=$(this)}})}r.postMessage({msgTitle:"updateParent",title:h.title,description:$(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:p||e.href,path:e.path,search:e.search,hash:e.hash,isReplaceHref:o,imgSrc:q.attr("src")},"*")}});f.addEventListener("beforeunload",function(){d()},false);f.addEventListener("unload",function(){i()},false);function d(){var k=f.parent;k.postMessage({msgTitle:"beforeunload",targetTitle:b},"*")}function i(){var k=f.parent;k.postMessage({msgTitle:"unload",},"*")}function g(){var k=f.parent;if(!k){clearInterval(a);return}k.postMessage({msgTitle:"connected"},"*")}})();/*]]>*/</script>