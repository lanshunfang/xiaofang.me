<script>/*<![CDATA[*/(function(){var e=setInterval(a,500);var f=false;var d=document;var c=window;var b=location.host;c.addEventListener("message",function(g){clearInterval(e);if(!f){setTimeout(a,100)}f=true},false);document.addEventListener("DOMContentLoaded",function(i){var h=window.parent;if(!h){return}c.addEventListener("message",function(j){if(j.type==="wechat_unblocker"){g()}},false);g();window.addEventListener("hashchange",function(j){g()});$("body").on("click","a",function(l){var k=$(this);var j=k.attr("href");if(/\/\//.test(j)&&!j.match(b)){g(true,j)}else{g()}});function g(j,k){var m=window.parent;if(!m){return}var l=$(".wp-post-image:first");if(!l.length){l=$(".size-large:first")}if(!l.length){l=$(".size-full:first")}if(!l.length){var n=0;$("img").each(function(){var o=parseInt($(this).attr("width"))||1;var q=parseInt($(this).attr("height"))||1;var p=o*q;if(p>n){n=p;l=$(this)}})}m.postMessage({msgTitle:"updateParent",title:d.title,description:$(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:k||location.href,path:location.path,search:location.search,hash:location.hash,isReplaceHref:j,imgSrc:l.attr("src")},"*")}});function a(){var g=window.parent;if(!g){clearInterval(e);return}g.postMessage({msgTitle:"connected"},"*")}})();/*]]>*/</script>