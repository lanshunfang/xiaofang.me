<script>/*<![CDATA[*/(function(){var e=setInterval(a,500);var f=false;var d=document;var c=window;var b=location.host;c.addEventListener("message",function(g){clearInterval(e);if(!f){setTimeout(a,100)}f=true},false);document.addEventListener("DOMContentLoaded",function(i){var h=window.parent;if(!h){return}c.addEventListener("message",function(k){if(k.type==="wechat_unblocker"){j()}},false);j();window.addEventListener("hashchange",function(k){j()});$("body").on("click","a",function(m){var l=$(this);var k=l.attr("href");if(/\/\//.test(k)&&!k.match(b)){g(true,k)}else{j()}});function j(){setTimeout(function(){g()},1000)}function g(k,l){var n=window.parent;if(!n){return}var m=$(".wp-post-image:first");if(!m.length){m=$(".size-large:first")}if(!m.length){m=$(".size-full:first")}if(!m.length){var o=0;$("img").each(function(){var p=parseInt($(this).attr("width"))||1;var r=parseInt($(this).attr("height"))||1;var q=p*r;if(q>o){o=q;m=$(this)}})}n.postMessage({msgTitle:"updateParent",title:d.title,description:$(".entry-content").clone().find("#toc_container").remove().end().find("p").text(),url:l||location.href,path:location.path,search:location.search,hash:location.hash,isReplaceHref:k,imgSrc:m.attr("src")},"*")}});function a(){var g=window.parent;if(!g){clearInterval(e);return}g.postMessage({msgTitle:"connected"},"*")}})();/*]]>*/</script>